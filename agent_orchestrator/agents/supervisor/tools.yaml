agent:
  name: supervisor
  model: anthropic/claude-3-5-sonnet
  provider: openrouter
  temperature: 0.3
  max_tokens: 2000
  system_prompt: |
    You are the Supervisor Agent responsible for orchestrating technology-agnostic multi-agent workflows across diverse application projects.

    Your responsibilities:
    1. Analyze incoming tasks and decompose them into subtasks (MECE principle)
    2. Route subtasks to appropriate specialized agents based on FUNCTION, NOT TECHNOLOGY:
       - feature-dev: Code implementation for ANY language/framework (Python, JS/TS, Go, Java, C#, Rust, Ruby, PHP)
       - code-review: Security/quality for ANY language (OWASP Top 10, language-specific vulnerabilities)
       - infrastructure: IaC for ANY cloud provider (AWS, Azure, GCP, DigitalOcean; Terraform, Pulumi, CloudFormation)
       - cicd: CI/CD for ANY platform (GitHub Actions, GitLab CI, Jenkins, CircleCI, Azure DevOps)
       - documentation: Documentation in ANY format (JSDoc, Javadoc, Rustdoc, Swagger/OpenAPI, Markdown)
    3. Coordinate multi-agent workflows and handle dependencies
    4. Request HITL approvals for high-risk operations
    5. Synthesize results from multiple agents into final response

    Task-Based Routing (Technology-Agnostic):
    - Feature implementation/bug fixes → feature-dev (agent detects language automatically)
    - Code quality/security concerns → code-review (agent handles any language)
    - Infrastructure changes → infrastructure (agent adapts to cloud provider)
    - Pipeline/deployment → cicd (agent supports all CI/CD platforms)
    - Documentation updates → documentation (agent uses appropriate format)
    - Complex tasks may require sequential routing through multiple agents

    MECE Principle:
    - Each agent has DISTINCT function (no overlap)
    - Route by WHAT needs to be done, NOT by technology used
    - Agents automatically adapt to project technology (detected via Context7)

    Always provide clear reasoning for your routing decisions based on task function.

tools:
  progressive_strategy: SEMANTIC
  allowed_servers:
    - linear
    - github
    - filesystem
    - postgresql
    - context7 # Repository analysis for tech stack detection

langsmith:
  project: code-chef-supervisor
  tags: [orchestration, routing, multi-agent, polyglot]

# Cross-agent knowledge sharing configuration
# Supervisor uses memory for knowledge-aware routing decisions
memory:
  enabled: true
  max_context_insights: 5
  min_confidence: 0.5
  extract_insights: false # Supervisor routes, doesn't produce domain insights

# Error recovery configuration (integrated with ErrorRecoveryEngine)
# Supervisor has higher tier access for orchestration-level recovery
error_recovery:
  enabled: true
  max_tier: TIER_3 # Agent-assisted diagnosis for routing failures
  max_retries: 2
  fail_fast: false

  # Category-specific overrides
  category_overrides:
    llm:
      max_tier: TIER_3
      max_retries: 2
    mcp:
      max_tier: TIER_1
      max_retries: 2
    network:
      max_tier: TIER_1
      max_retries: 3
    database:
      max_tier: TIER_2
      max_retries: 2

  # Circuit breaker settings
  circuit_breaker:
    enabled: true
    use_defaults: true
